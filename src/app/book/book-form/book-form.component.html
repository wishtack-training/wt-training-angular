<form
    [formGroup]="bookForm"
    (ngSubmit)="submitBook()">

  <!-- Book group. -->
  <div>

    <mat-form-field>
      <input
          formControlName="title"
          matInput
          placeholder="Book title"
          type="text">
    </mat-form-field>

    <mat-form-field>
      <input
          formControlName="price"
          matInput
          placeholder="Book price"
          type="number">
    </mat-form-field>

  </div>

  <!-- Author group. -->
  <div formGroupName="author">

    <mat-form-field>
      <input
          formControlName="name"
          matInput
          placeholder="Author name"
          type="text">
    </mat-form-field>

  </div>


  <button
      color="primary"
      mat-raised-button
      type="submit"
      [disabled]="!bookForm.valid">{{ buttonLabel || 'SUBMIT' }}
  </button>

  <div *ngIf="bookForm.get('book.title') as titleControl">

    <div *ngIf="titleControl.touched && titleControl.hasError('required')">
      Title is required
    </div>

  </div>

</form>

<button
    mat-button
    (click)="shouldShowPreview = !shouldShowPreview">TOGGLE PREVIEW</button>

<wt-book-preview
    *ngIf="shouldShowPreview && previewBook"
    [book]="previewBook"></wt-book-preview>
